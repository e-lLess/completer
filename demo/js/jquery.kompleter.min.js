!function(a,b,c){"use strict";var d={},e={},f=[],g=-1,h="",i=c("<div>",{id:"searcher",class:"form--light-search"}),j=null,k=null,l=c("<div>",{id:"result",class:"form--search__result"}),m={},n=function(){var a=function(a,d){40===d?(g!==-1&&c(),g++,b()):38===d&&(c(),g--,g!==-1&&b())},b=function(){j=f[g],f[g].addClass("focus")},c=function(){j=null,f[g].removeClass("focus")},d={};return d.set=a,d};d.focus=n();var o=function(){var a=function(a){return c.grep(a,function(a){return isNaN(k.val())?e.begin===!0?0===a[e.field].toLowerCase().lastIndexOf(k.val().toLowerCase(),0):a[e.field].toLowerCase().lastIndexOf(k.val().toLowerCase())!==-1:parseInt(k.val())===parseInt(a[e.field])})},b={};return b.filter=a,b};d.filtering=o();var p=function(){var d=function(){try{var d=function(){return c.getJSON({url:e.url,data:{expression:k.val()}})},f=function(d){"undefined"!=typeof d&&null!==d||a.console.log("Error"),c(b).trigger("c.display",[d])},g=function(b,c,d){a.console.log("Error in request : "+d)},h=d().done(f).fail(g);c.when(h).done(function(){a.console.log("all done")})}catch(b){a.alert("Request cannot be done")}},f={};return f.get=d,f};d.request=p();var q=function(){var h=function(){k.wrap(i),k.after(l)},n=function(a,f){if(e.beforeDisplay(a,f),c(b).trigger("c.display.before"),null===f)throw new Error("Variable params cannot be null");m=d.filtering.filter(f),o(m),c(b).trigger("c.display.after"),e.afterDisplay(a,m)},o=function(b){try{var d,g,h=0,i=b.length;for(0===i&&(d=c("<div>",{class:"item--result",html:"No result"})),f=[],l.html(""),h;h<e.maxResults;h++)if("undefined"!=typeof b[h]){var j=h+1===i?"last":"";d=c("<div>",{id:h,class:"item--result "+j});for(var k=0;k<e.fieldsToDisplay.length;k++)g=c("<span>",{class:"data-"+k,html:b[h][e.fieldsToDisplay[k].trim()]}),d[0].append(g[0]);f.push(d),l.append(d)}}catch(b){a.console.log(b)}},p=function(a,d){g>=-1&&g<=f.length-1&&(g===-1?40===d&&c(b).trigger("c.focus",[d]):g===f.length-1?38===d&&c(b).trigger("c.focus",[d]):c(b).trigger("c.focus",[d]))},q=function(a){var d=null!==j?j.attr("id"):0;e.beforeComplete(a,m,m[d]),k.val(m[d][e.field]),c(b).trigger("c.complete.after"),e.afterComplete(a,m,m[d])},r=function(){switch(e.animation){case"fade":l.fadeIn(e.animationSpeed);break;case"slide":l.slideDown(e.animationSpeed);break;default:l.fadeIn(e.animationSpeed)}g=-1},s=function(){switch(g=-1,e.animation){case"fade":l.fadeOut(e.animationSpeed);break;case"slide":l.slideUp(e.animationSpeed);break;default:l.fadeOut(e.animationSpeed)}},t={};return t.init=h,t.display=n,t.navigate=p,t.complete=q,t.show=r,t.hide=s,t};d.view=q();var r=function(){var f=function(){var f=c("body");k.on("keyup",function(d){d=d||a.event;var f=d.keyCode;38===f||40===f?c(b).trigger("c.navigate",[f]):13===f?c(b).trigger("c.complete"):e.onChar<=k.val().length&&k.val()!==h&&c(b).trigger("c.request")}),f.on("click",function(){c(b).trigger("c.complete.after")}),f.on("click",".item--result",function(a){e.beforeFocus(a,c(this)),j=c(this),c(b).trigger("c.complete"),e.afterFocus(a,c(this))}),c(b).on("c.complete",d.view.complete),c(b).on("c.complete.after",d.view.hide),c(b).on("c.request",d.request.get),c(b).on("c.display.before",d.view.show),c(b).on("c.display",d.view.display),c(b).on("c.display.after",e.afterDisplay),c(b).on("c.navigate",d.view.navigate),c(b).on("c.focus",d.focus.set)},g={};return g.init=f,g};d.handlers=r(),c.fn.kompleter=function(a){if(!c.data(b.body,"completer")){if(c.data(b.body,"completer",!0),k=c(this),null===k.data("url")||""===k.data("url"))throw new Error("URL data attribute is mandatory");if(null===k.data("filter-on")||""===k.data("filter-on"))throw new Error("Field data attribute is mandatory");if(null===k.data("fields")||""===k.data("fields"))throw new Error("fieldsToDisplay data-attribute is mandatory");return a.url=k.data("url"),a.field=k.data("filter-on"),a.fieldsToDisplay=k.data("fields").split(","),e=c.fn.kompleter.defaults=c.extend({},c.fn.kompleter.defaults,a),d.view.init(),d.handlers.init(),c(this)}},c.fn.kompleter.defaults={url:null,completerName:"kompleter",animation:"fade",animationSpeed:350,begin:!0,onChar:2,maxResults:10,field:null,fieldsToDisplay:null,beforeDisplay:function(a,b){},afterDisplay:function(a,b){},beforeFocus:function(a,b){},afterFocus:function(a,b){},beforeComplete:function(a,b,c){},afterComplete:function(a,b,c){}},c.kompleter=c.fn.kompleter}(window,document,jQuery);
//# sourceMappingURL=../../dist/js/sourcemap.map