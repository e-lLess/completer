!function(a,b,c){"use strict";var d,e={},f={},g=[],h=-1,i="",j=null,k=null,l=c("<div>",{id:"result",class:"form--search__result"}),m={},n=function(){var a=function(a,d){40===d?(h!==-1&&c(),h++,b()):38===d&&(c(),h--,h!==-1&&b())},b=function(){j=g[h],g[h].addClass("focus")},c=function(){j=null,g[h].removeClass("focus")},d={};return d.set=a,d};e.focus=n();var o=function(){var a=function(a){return c.grep(a,function(a){return isNaN(k.val())?f.begin===!0?0===a[f.field].toLowerCase().lastIndexOf(k.val().toLowerCase(),0):a[f.field].toLowerCase().lastIndexOf(k.val().toLowerCase())!==-1:parseInt(k.val())===parseInt(a[f.field])})},b={};return b.filter=a,b};e.filtering=o();var p=function(){var d=function(d){try{var e=function(){return c.getJSON({url:f.url,data:{expression:k.val()}})},g=function(d){"undefined"!=typeof d&&null!==d||a.console.log("Error"),c(b).trigger("c.display",[d])},h=function(b,c,d){a.console.log("Error in request : "+d)},i=e().done(g).fail(h);c.when(i).done(function(){a.console.log("all done")})}catch(b){a.alert("Request cannot be done")}},e={};return e.get=d,e};e.request=p();var q=function(){var i=function(){d.append(l)},n=function(a,d){if(f.beforeDisplay(a,d),c(b).trigger("c.display.before"),null===d)throw new Error("Variable params cannot be null");m=e.filtering.filter(d),o(m),c(b).trigger("c.display.after"),f.afterDisplay(a,m)},o=function(b){try{var d,e,h=0,i=b.length;for(0===i&&(d=c("<div>",{class:"item--result",html:"No result"})),g=[],l.html(""),h;h<f.maxResults;h++)if("undefined"!=typeof b[h]){var j=h+1===i?"last":"";d=c("<div>",{id:h,class:"item--result "+j});for(var k=0;k<f.fieldsToDisplay.length;k++)e=c("<span>",{class:"data-"+k,html:b[h][f.fieldsToDisplay[k]]}),d[0].append(e[0]);g.push(d),l.append(d)}}catch(b){a.console.log(b)}},p=function(a,d){h>=-1&&h<=g.length-1&&(h===-1?40===d&&c(b).trigger("c.focus",[d]):h===g.length-1?38===d&&c(b).trigger("c.focus",[d]):c(b).trigger("c.focus",[d]))},q=function(a){var d=null!==j?j.attr("id"):0;f.beforeComplete(a,m,m[d]),k.val(m[d][f.field]),c(b).trigger("c.complete.after"),f.afterComplete(a,m,m[d])},r=function(){switch(f.animation){case"fade":l.fadeIn(f.animationSpeed);break;case"slide":l.slideDown(f.animationSpeed);break;default:l.fadeIn(f.animationSpeed)}h=-1},s=function(){switch(h=-1,f.animation){case"fade":l.fadeOut(f.animationSpeed);break;case"slide":l.slideUp(f.animationSpeed);break;default:l.fadeOut(f.animationSpeed)}},t={};return t.init=i,t.display=n,t.navigate=p,t.complete=q,t.show=r,t.hide=s,t};e.view=q();var r=function(){var d=function(){var d=c("body");k.on("keyup",function(d){d=d||a.event;var e=d.keyCode;38===e||40===e?c(b).trigger("c.navigate",[e]):13===e?c(b).trigger("c.complete"):f.onChar<=k.val().length&&k.val()!==i&&c(b).trigger("c.request")}),d.on("click",function(a){c(b).trigger("c.complete.after")}),d.on("click",".item--result",function(a){f.beforeFocus(a,c(this)),j=c(this),c(b).trigger("c.complete"),f.afterFocus(a,c(this))}),c(b).on("c.complete",e.view.complete),c(b).on("c.complete.after",e.view.hide),c(b).on("c.request",e.request.get),c(b).on("c.display.before",e.view.show),c(b).on("c.display",e.view.display),c(b).on("c.display.after",f.afterDisplay),c(b).on("c.navigate",e.view.navigate),c(b).on("c.focus",e.focus.set)},g={};return g.init=d,g};e.handlers=r(),c.fn.completer=function(a){if(!c.data(b.body,"completer")){if(c.data(b.body,"completer",!0),f=c.fn.completer.defaults=c.extend({},c.fn.completer.defaults,a),null===f.url)throw new Error("URL option is mandatory");if(null===f.field)throw new Error("Field option is mandatory");return d=c(this),k=c(this).find('input[type="text"]'),e.view.init(),e.handlers.init(),c(this)}},c.fn.completer.defaults={url:null,completerName:"completer",animation:"fade",animationSpeed:350,begin:!0,onChar:2,maxResults:10,field:null,fieldsToDisplay:[1,2,3],beforeDisplay:function(a,b){},afterDisplay:function(a,b){},beforeFocus:function(a,b){},afterFocus:function(a,b){},beforeComplete:function(a,b,c){},afterComplete:function(a,b,c){}},c.completer=c.fn.completer}(window,document,jQuery);
//# sourceMappingURL=sourcemap.map